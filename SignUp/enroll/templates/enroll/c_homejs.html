<script type="text/javascript">
  $(document).on('submit','#post-confirmationA',function(e){
    e.preventDefault();
    $.ajax({
      type:'POST',
      url:'/adm_reaction',
      data:{
          apt:$('#apt').val(),
          accept:$('#adm-a').val(),
          reject:$('#adm-r1').val(),
          csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
      },
      success: function(data){
         //alert(data)
      }
    });
  });
</script>
<script type="text/javascript">
  $(document).on('submit','#post-confirmationR',function(e){
    e.preventDefault();
    $.ajax({
      type:'POST',
      url:'/adm_reaction',
      data:{
          apt:$('#apt').val(),
          accept:$('#adm-a1').val(),
          reject:$('#adm-r').val(),
          csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
      },
      success: function(data){
         //alert(data)
      }
    });
  });
</script>
<script>
    setTimeout(function() {
    $('#mymessage').fadeOut(1500);
}, 2000); // <-- time in milliseconds
</script>
<script>

    const searchFun = () => {
       let filter = document.getElementById('myInput').value.toUpperCase();
       console.log(filter)
       let myTable = document.getElementById('myTable');
       let tr = myTable.getElementsByTagName('tr');
       console.log(tr)
       console.log(tr.length)
       console.log(tr.length - 1)
       let A = 0;
        {
           for(var i=1; i< tr.length;i++)
           {
                  let td = tr[i].getElementsByTagName('td')[0].textContent;
                             console.log(td.toUpperCase())
                   if (td.toUpperCase().indexOf(filter)>-1)
                     {
                          tr[i].style.display="";
                          $("#dem").hide();
                     }
                   else
                     {
                        tr[i].style.display="none";
                     }
                  if (td.toUpperCase().indexOf(filter) == -1)
                     {
                        console.log(td.toUpperCase().indexOf(filter))
                        console.log(" value is -1 ")
                        A+=1;
                     }
                  else if (td.toUpperCase().indexOf(filter) == 0)
                    {
                        console.log(td.toUpperCase().indexOf(filter))
                        console.log(" value is 0 ")
                        A-=1;
                    }
           }

           console.log(A)
           console.log(tr.length -1 )

           if (A == (tr.length - 1))
             {
                  document.getElementById("dem").innerHTML = 'No Such Room Exists !';
                  $("#dem").show();

             }
        }
    }
</script>
<!-|  USER DELETE Filter section ! ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||-->

<script>

    const searchdelete = () => {
       let filter = document.getElementById('myInputdelete').value.toUpperCase();
       console.log(filter)
       let myTable = document.getElementById('myTabledelete');
       let tr = myTable.getElementsByTagName('tr');
       let A = 0;
       {
           for(var i=1; i< tr.length;i++)
           {
                  let td = tr[i].getElementsByTagName('td')[0].textContent;
                             console.log(td.toUpperCase())
                   if (td.toUpperCase().indexOf(filter)>-1)
                     {
                          tr[i].style.display="";
                          $("#demD").hide();
                     }
                   else
                     {
                        tr[i].style.display="none";
                     }
                  if (td.toUpperCase().indexOf(filter) == -1)
                     {
                        console.log(td.toUpperCase().indexOf(filter))
                        console.log(" value is -1 ")
                        A+=1;
                     }
                  else if (td.toUpperCase().indexOf(filter) == 0)
                    {
                        console.log(td.toUpperCase().indexOf(filter))
                        console.log(" value is 0 ")
                        A-=1;
                    }
           }

           console.log(A)
           console.log(tr.length -1 )

           if (A == (tr.length - 1))
             {
                  document.getElementById("demD").innerHTML = 'No Such User Exists !';
                  $("#demD").show();
             }
        }
    }
</script>
<!-|  USER DELETE POST section ! ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||-->
<script>

  $(document).on('submit','#post-delete',function(e){
    e.preventDefault();
    console.log('Delete button clicked')
    $.ajax({
        type: 'POST',
        url : 'userdelete/',
        data:{
        searchdata:$('input[name=myInputdelete]').val(),
        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
        },
        success: function(res){
             console.log(res.status)
             if (res.status==1)
                {
                           let myTable1 = document.getElementById('myTabledelete');
                           let tr = myTable1.getElementsByTagName('tr');
                           for(var i=1; i< tr.length;i++)
                           {
                              let td = tr[i].getElementsByTagName('td')[0].textContent;
                                         console.log("Ready to FADE . . . ")
                                         console.log(td)
                                         $(tr[i]).fadeOut(1000);
                                         $('.search-delete').val('');
                           }

                }
            else if (res.status=='Y')
                {
                      let myTable1 = document.getElementById('myTabledelete');
                           let tr = myTable1.getElementsByTagName('tr');
                           for(var i=1; i< tr.length;i++)
                           {
                              let td = tr[i].getElementsByTagName('td')[0].textContent;
                                         console.log("Ready to FADE . . . ")
                                         console.log(td)
                                         $(tr[i]).fadeOut(1000);
                                         $('.search-delete').val('');
                           }
                      $('.user-cog').hide();
                }


             else
             {
                     alert('No Such User Exists !')
             }
             },

        error: function(res){
            alert('An error occured !!!')
        },
    });

})

</script>
<!-|  USER MANAGE Filter section ! ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||-->
<script>

    const searchmanage = () => {
       let filter = document.getElementById('myInputmanage').value.toUpperCase();
       console.log(filter)
       let myTable = document.getElementById('myTablemanage');
       let tr = myTable.getElementsByTagName('tr');
       console.log(tr)
       console.log(tr.length)
       console.log(tr.length - 1)
              let A = 0;
        {
           for(var i=1; i< tr.length;i++)
           {
                  let td = tr[i].getElementsByTagName('td')[0].textContent;
                             console.log(td.toUpperCase())
                   if (td.toUpperCase().indexOf(filter)>-1)
                     {
                          tr[i].style.display="";
                          $("#demM").hide();
                     }
                   else
                     {
                        tr[i].style.display="none";
                     }
                  if (td.toUpperCase().indexOf(filter) == -1)
                     {
                        console.log(td.toUpperCase().indexOf(filter))
                        console.log(" value is -1 ")
                        A+=1;
                     }
                  else if (td.toUpperCase().indexOf(filter) == 0)
                    {
                        console.log(td.toUpperCase().indexOf(filter))
                        console.log(" value is 0 ")
                        A-=1;
                    }
           }

           console.log(A)
           console.log(tr.length -1 )

           if (A == (tr.length - 1))
             {
                  document.getElementById("demM").innerHTML = 'No Such Room Exists !';
                  $("#demM").show();

             }
        }

    }
</script>
<!-|  USER MANAGE POST section ! ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||-->
<script>

  $(document).on('submit','#post-manage',function(e){
    e.preventDefault();
    console.log('Manage button clicked')
    $.ajax({
        type: 'POST',
        url : 'usermanage/',
        data:{
        managedata:$('input[name=myInputmanage]').val(),
        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
        },
        success: function(res){
             console.log('hello')
             console.log(res.status)
             console.log(res.user_data)
             console.log(res.MATCHED)
             if (res.status==1)
                {
                           let myTable1 = document.getElementById('myTablemanage');
                           let tr = myTable1.getElementsByTagName('tr');
                           for(var i=1; i< tr.length;i++)
                           {
                              let td = tr[i].getElementsByTagName('td')[0].textContent;
                                         console.log("Ready to FADE . . . ")
                                         console.log(td)
                                         $(tr[i]).fadeOut(1000);
                                         $('.search-manage').val('');
                           }
                }

            else if (res.status== -1)
              {
                  alert(res.say)
              }

             else{
                    alert('Plz ensure you write Room name as shown on filtered !')

             }

             },

        error: function(res){
                        alert("Something went wrong ! { Hint : You haven't provided exact Room Name. }")

        },
    });

})

</script>
<!-- USER CLICKED TO SEE ROOMS -->

<script>
        $(".user-manage").click(function(){
        output='';
    $.ajax({
        type: 'GET',
        url : 'room_am_in/',
        success: function(res){
          console.log('You table on user manage button')
          console.log(res.std_user_manage)
            if (res.stc == 1)
             {
                 for(i=0;i < res.std_user_manage.length;i++)
                  {
                     if(res.name_of_room == res.std_user_manage[i].Room_ka_name)
                     {
                        output+="<tr><td>" + 'Your Room : '+ res.std_user_manage[i].Room_ka_name+ "</td></tr>"
                     }
                     else
                     {
                        output+="<tr><td>" + res.std_user_manage[i].Room_ka_name + "</td></tr>"
                     }
                  }
                  $("#tbodymanage").html(output);
                  //$("#tbody").append(output);
             }
            else
               {
                  {
                     output+="<tr><td style='color:red;font-size:20px;'>" + 'Yet, you are in No Room !' + "</td></tr>"
                  }
                  $("#tbodymanage").html(output);
               }

        },
        error: function(res){
            alert('An error occured')
        }
    });
})
</script>

<script>
        $(".question").click(function(){
        output='';
    $.ajax({
        type: 'GET',
        url : 'roomcreated/',
        success: function(res){
          console.log(res.std_room)
          if (res.room_avl != 0)
            {
                 for(i=0;i < res.std_room.length;i++)
                  {
                     output+="<tr><td>" + res.std_room[i].Room_name + "</td></tr>"
                  }
                  $("#tbody").html(output);
                  //$("#tbody").append(output);
             }
          else
            {
                  {
                     output+="<tr><td>" + 'No Rooms Available !' + "</td></tr>"
                  }
                  $("#tbody").html(output);

            }

        },
        error: function(res){
            alert('An error occured')
        }
    });
})
</script>

<script>
        $(".user-cog").click(function(){
        output='';
    $.ajax({
        type: 'GET',
        url : 'user_in_ur_room/',
        success: function(res){
          console.log(res.std_user)
             for(i=0;i < res.std_user.length;i++)
              {
                     if (res.name_of_adm ==  res.std_user[i].user_ka_name)
                     {
                           output+="<tr><td>" + 'You' + "</td></tr>"
                     }
                     else
                     {
                           output+="<tr><td>" + res.std_user[i].user_ka_name + "</td></tr>"
                     }
              }
              $("#tbodydelete").html(output);
              //$("#tbody").append(output);

        },
        error: function(res){
            alert('An error occured')
        }
    });
})
</script>

<script type="text/javascript">
  document.addEventListener("contextmenu",function(y){
  y.preventDefault();
  });

</script>